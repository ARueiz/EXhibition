
@{
    ViewBag.Title = "EditHost";
}

<div class="container h-100 mt-3" id="VuePage">
    <div class="row justify-content-sm-center h-100">
        <div>
            <h1>主辦資訊</h1>

            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>name</th>
                        <th>phone</th>
                        <th>exhibitionname</th>
                        <th>startdate</th>
                        <th>enddate </th>
                        <th>---------------------- </th>
                    </tr>
                </thead>
                <tr v-for="(item, index) in res">
                    <td v-show="false" id="evid">{{item.evid}}</td>
                    <td>{{index + 1}}</td>
                    <td>{{item.name }}</td>
                    <td>{{item.phone }}</td>
                    <td>{{item.exhibitionname}}</td>
                    <td>{{item.startdate }}</td>
                    <td>{{item.enddate }}</td>
                    <td>
                        <input type="submit" value="審核" class="btn btn-secondary" />

                        <input type="submit" value="編輯" class="btn btn-primary" />

                        <input type="submit" value="明細" class="btn btn-dark" v-on:click="Details(item.evid)" />
                    </td>

                </tr>
            </table>
            <div class="pagination">
                <ul>
                    <li v-bind:class="{'disabled': (currPage === 1)}"
                        v-on:click.prevent="setPage(currPage-1)"><a href="#">Prev</a></li>
                    <li v-for="n in totalPage"
                        v-bind:class="{'active': (currPage === (n))}"
                        v-on:click.prevent="setPage(n)"><a href="#">{{n}}</a></li>
                    <li v-bind:class="{'disabled': (currPage === totalPage)}"
                        v-on:click.prevent="setPage(currPage+1)"><a href="#">Next</a></li>
                </ul>
            </div>
        </div>

    </div>
</div>

@section scripts {


    <script>

        var VuePage = new Vue({
            el: '#VuePage',
            data: {
                res: [],
                countOfPage: 5,
                currPage: 1,
            },

            mounted() {
                axios
                    .get('/HostApi/List')
                    .then(function (response) {
                        VuePage.res = response.data

                    })
                    .catch((err) => {
                        console.log(err)
                    });
            },
            computed: {

                pageStart: function () {
                    return (this.currPage - 1) * this.countOfPage;
                },
                totalPage: function () {
                    return Math.ceil(this.filteredRows.length / this.countOfPage);
                }




            },


            methods: {
                Details: function (va) {

                    axios.post('/HostApi/PostList', "/" + va)
                        .then(function (response) {
                            window.location.href = "/" + "host" + "/" + "DetailsHost" + "/" + va
                        })
                        .catch((err) => {
                            console.log(err)
                        });

                },



                setPage: function (idx) {
                    if (idx <= 0 || idx > this.totalPage) {
                        return;
                    }
                    this.currPage = idx;
                },


            },

            computed: {



            },
        });




    </script>
}